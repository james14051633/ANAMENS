const modelos = {
  denver_ii: [
    { label: 'Nome da criança', type: 'text', name: 'nome_crianca', required: true },
    { label: 'Data de nascimento', type: 'date', name: 'data_nascimento', required: true },
    { label: 'Idade (anos, meses, dias)', type: 'text', name: 'idade', required: true },
    { label: 'Data do teste', type: 'date', name: 'data_teste', required: true },
    { label: 'Nome do avaliador', type: 'text', name: 'avaliador', required: true },
    { label: 'Responsável presente', type: 'text', name: 'responsavel', required: false },
    { label: 'Olha para o rosto', type: 'select', name: 'olha_rosto', required: true, options: ['Passou', 'Falhou', 'Sem oportunidade', 'Recusou'] },
    { label: 'Sorri em resposta', type: 'select', name: 'sorri_resposta', required: true, options: ['Passou', 'Falhou', 'Sem oportunidade', 'Recusou'] },
    { label: 'Observações gerais', type: 'textarea', name: 'observacoes' },
    { label: 'Interpretação do teste', type: 'select', name: 'interpretacao', required: true, options: ['Normal', 'Questionável', 'Não aplicável'] }
  ],
  checklist_denver: [
    { label: 'Nome da criança', type: 'text', name: 'nome_crianca', required: true },
    { label: 'Data de nascimento', type: 'date', name: 'data_nascimento', required: true },
    { label: 'Idade (anos, meses, dias)', type: 'text', name: 'idade', required: true },
    { label: 'Data do teste', type: 'date', name: 'data_teste', required: true },
    { label: 'Nome do avaliador', type: 'text', name: 'avaliador', required: true },
    { label: 'Responsável presente', type: 'text', name: 'responsavel', required: false },
    { label: 'Olha para o rosto', type: 'select', name: 'olha_rosto', required: true, options: ['Passou', 'Falhou', 'Sem oportunidade', 'Recusou'] },
    { label: 'Sorri em resposta', type: 'select', name: 'sorri_resposta', required: true, options: ['Passou', 'Falhou', 'Sem oportunidade', 'Recusou'] },
    { label: 'Observações gerais', type: 'textarea', name: 'observacoes' },
    { label: 'Interpretação do teste', type: 'select', name: 'interpretacao', required: true, options: ['Normal', 'Questionável', 'Não aplicável'] }
  ],
  copm: [
    {
      category: "Cuidados Pessoais",
      questions: [
        "Escolha uma atividade importante para você relacionada a cuidados pessoais",
        "Avalie seu desempenho nessa atividade (1 a 10)",
        "Avalie sua satisfação com seu desempenho nessa atividade (1 a 10)"
      ]
    },
    {
      category: "Lazer",
      questions: [
        "Escolha uma atividade importante para você relacionada a lazer",
        "Avalie seu desempenho nessa atividade (1 a 10)",
        "Avalie sua satisfação com seu desempenho nessa atividade (1 a 10)"
      ]
    },
    {
      category: "Trabalho",
      questions: [
        "Escolha uma atividade importante para você relacionada ao trabalho",
        "Avalie seu desempenho nessa atividade (1 a 10)",
        "Avalie sua satisfação com seu desempenho nessa atividade (1 a 10)"
      ]
    }
  ]
};

// Função para criar o formulário COPM dinamicamente e validar
function createCOPMForm(containerId) {
  const container = document.getElementById(containerId);
  if (!container) {
    console.error(`Elemento com id "${containerId}" não encontrado.`);
    return;
  }

  container.innerHTML = ''; // limpa container

  const form = document.createElement("form");
  form.id = "copmForm";

  modelos.copm.forEach((section, i) => {
    const sectionDiv = document.createElement("div");
    sectionDiv.style.border = "1px solid #ddd";
    sectionDiv.style.padding = "10px";
    sectionDiv.style.marginBottom = "15px";

    const title = document.createElement("h2");
    title.textContent = section.category;
    sectionDiv.appendChild(title);

    // Pergunta 1 - texto
    const q1Label = document.createElement("label");
    q1Label.setAttribute("for", `activity_${i}`);
    q1Label.textContent = section.questions[0];
    sectionDiv.appendChild(q1Label);

    const q1Input = document.createElement("input");
    q1Input.type = "text";
    q1Input.id = `activity_${i}`;
    q1Input.name = `activity_${i}`;
    q1Input.required = true;
    sectionDiv.appendChild(q1Input);

    // Pergunta 2 - número
    const q2Label = document.createElement("label");
    q2Label.setAttribute("for", `performance_${i}`);
    q2Label.textContent = section.questions[1];
    sectionDiv.appendChild(q2Label);

    const q2Input = document.createElement("input");
    q2Input.type = "number";
    q2Input.id = `performance_${i}`;
    q2Input.name = `performance_${i}`;
    q2Input.min = 1;
    q2Input.max = 10;
    q2Input.required = true;
    sectionDiv.appendChild(q2Input);

    // Pergunta 3 - número
    const q3Label = document.createElement("label");
    q3Label.setAttribute("for", `satisfaction_${i}`);
    q3Label.textContent = section.questions[2];
    sectionDiv.appendChild(q3Label);

    const q3Input = document.createElement("input");
    q3Input.type = "number";
    q3Input.id = `satisfaction_${i}`;
    q3Input.name = `satisfaction_${i}`;
    q3Input.min = 1;
    q3Input.max = 10;
    q3Input.required = true;
    sectionDiv.appendChild(q3Input);

    form.appendChild(sectionDiv);
  });

  const submitBtn = document.createElement("button");
  submitBtn.type = "submit";
  submitBtn.textContent = "Enviar";
  form.appendChild(submitBtn);

  const resultDiv = document.createElement("div");
  resultDiv.id = "result";
  resultDiv.style.mar

